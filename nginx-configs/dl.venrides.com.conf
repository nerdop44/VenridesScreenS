# ConfiguraciÃ³n para dl.venrides.com (Download Shortener)
# Este archivo debe colocarse en /etc/nginx/sites-available/ en el VPS
# Certbot agregarÃ¡ automÃ¡ticamente SSL:
# sudo certbot --nginx -d dl.venrides.com

server {
    listen 80;
    server_name dl.venrides.com;

    # Short URL redirect: dl.venrides.com/tv â†’ API download endpoint
    location /tv {
        proxy_pass http://localhost:8080/downloads/tv;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Large file support
        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_buffering off;
    }

    # Root redirect â€” show basic download page
    location / {
        default_type text/html;
        return 200 '<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VenridesScreenS - Descargas</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, sans-serif; background: #0a0a0f; color: #fff; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .card { text-align: center; padding: 3rem; max-width: 400px; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        p { color: #888; margin-bottom: 2rem; font-size: 0.9rem; }
        .btn { display: inline-block; background: #c8ff00; color: #000; padding: 14px 32px; border-radius: 12px; text-decoration: none; font-weight: 700; font-size: 1rem; transition: all 0.2s; }
        .btn:hover { filter: brightness(1.1); transform: scale(1.05); }
        .logo { font-size: 3rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div class="card">
        <div class="logo">ðŸ“º</div>
        <h1>VenridesScreenS TV</h1>
        <p>Descarga la aplicaciÃ³n para tu Smart TV Android</p>
        <a href="/tv" class="btn">â¬‡ Descargar APK</a>
    </div>
</body>
</html>';
    }

    # Logs
    access_log /var/log/nginx/dl.venrides.com.access.log;
    error_log /var/log/nginx/dl.venrides.com.error.log;
}
